<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trello Board</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f5f7;
        margin: 0;
        padding: 20px;
    }

    h2 {
        font-size: 20px;
        margin-bottom: 10px;
        color: #172b4d;
    }

    p {
        font-size: 16px;
        margin-bottom: 5px;
        color: #172b4d;
    }

    .list-container {
        background-color: #ebecf0;
        border-radius: 3px;
        padding: 10px;
        margin-bottom: 20px;
    }

    .card-container {
        margin-left: 20px;
        margin-top: 10px;
    }
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div id="lists"></div>

    <script>
        $(document).ready(function(){
            var trelloApiKey = '7d14288264ab0bf23e34850a66e9528e';
            var trelloToken = 'ATTAc4e9eee205f99466cbe7b9e67bdc03db64e48cb1723aabc8ad5bdb9cecbbffc5D4FB9F69';
            var trelloBoardId = '6357540ec8ee600110df8b96';

            function fetchAndUpdate() {
                var url = 'https://api.trello.com/1/boards/' + trelloBoardId + '/lists?key=' + trelloApiKey + '&token=' + trelloToken;

                $.get(url, function(data){
                    $('#lists').empty(); // Clear previous content

                    data.forEach(function(list){
                        // Exclude lists "COMPRAS" and "PLATOS"
                        if (list.name !== "COMPRAS" && list.name !== "PLATOS") {
                            var listContainer = $('<div class="list-container"></div>');
                            var title = $('<h2>' + list.name + '</h2>');
                            var cardContainer = $('<div class="card-container" id="cards-' + list.id + '"></div>');

                            listContainer.append(title);
                            listContainer.append(cardContainer);
                            $('#lists').append(listContainer);

                            var cardsUrl = 'https://api.trello.com/1/lists/' + list.id + '/cards?key=' + trelloApiKey + '&token=' + trelloToken;

                            $.get(cardsUrl, function(cards){
                                cards.forEach(function(card){
                                    cardContainer.append('<p>' + card.name + '</p>');
                                });
                            });
                        }
                    });
                });
            }

            // Initial fetch and update
            fetchAndUpdate();

            // Update every 30 minutes
            setInterval(fetchAndUpdate, 30 * 60 * 1000); // 30 minutes in milliseconds
        });
    </script>
</body>
</html>
